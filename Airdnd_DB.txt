--유저 DB
create table airdnd_userDB(
	idx int(9) NOT NULL auto_increment,
	email varchar(100) NOT NULL, --ID 겸 이메일
	pwd varchar(100) NOT NULL,
	last_name varchar(200) NOT NULL,
	first_name varchar(200) NOT NULL,
	birthday date NOT NULL,
	profileImg varchar(100) DEAFULT NULL,
	phone varchar(100) NOT NULL, --하이픈(-) 없이 입력
	signupDate DATE NOT NULL,
	description TEXT(10000) NOT NULL,
	PRIMARY KEY(idx)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO airdnd_UserDB VALUE(0, 'one@naver.com', '1111!!!!' , 'hong', 'gildong' , '1995-09-19' , '' , '01020303891' , '우성이가 만든 테스트 아이디입니다', sysdate);
INSERT INTO airdnd_UserDB VALUE(0, 'two@naver.com', '1111!!!!' , 'hong', 'gilsoon' , '1996-09-19' , '' , '01020303892' , '유진이가 만든 테스트 아이디입니다', sysdate);




--호스트 DB
create table airdnd_hostDB(
	idx int(9) NOT NULL auto_increment,
	home_idx int(9) NOT NULL,
	user_idx int(9) NOT NULL,
	check_superhost int(3) DEFAULT 0,
	check_certification int(3) DEFAULT 0,
	PRIMARY KEY(idx)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO airdnd_hostDB VALUE(0, 1, 2, 1, 1);





--호스트 숙소 예약관리 DB
--(체크인, 체크아웃 생략)

create table airdnd_hostManageDB(
	idx int(9) NOT NULL auto_increment,
	home_idx int(9) NOT NULL,
	user_idx int(9) NOT NULL,
	reservation_date datetime NOT NULL,
	booking_number varchar(100) NOT NULL,
	PRIMARY KEY(idx)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO airdnd_hostManageDB VALUE(0, 1, 1, STR_TO_DATE('2020-08-17', '%Y-%m-%d'), '200817-142131-1');






insert도 하나씩 만들 것

--숙소 DB
create table airdnd_home (
--	idx int auto_increment primary key, 	
--	main_title varchar(1000) not null, 
--	sub_title varchar(1000) not null,	
--?	host_idx varchar(1000) not null, --FK	
--?	user_idx varchar(1000) not null, --FK	
--	bath_cnt int default 0,
--	bed_cnt int default 0,
--	bed_type varchar(1000),
--	bed_icon varchar(10000),
--	bedroom_cnt int default 0,
--	facilities varchar(1000),
--	price int default 0,
	img varchar(50000) not null,
--?	phone varchar(1000) not null,
--	latlng varchar(1000) not null,--위경도
--	addr varchar(1000) not null,
	loc_des varchar(1000), --위치설명
--	max_peop int default 0, --최대인원
	in_out_way varchar(1000) not null, --체크인아웃 방법
	strong_clean int default 0, --청결강화 여부 / no: 0 / yes : 1
	remain_room int default 0, --잔여객실 여부 / no: 0 / yes : 1
	host_request varchar(1000), --호스트 당부말
	acm_type varchar(1000) not null, --숙소유형(개인실/다인실/ 집 전체)
	use_rule varchar(1000) not null, --숙소 이용 규칙(반려동물, 흡연 등)
	safety varchar(1000) not null, --안전 및 숙소정보(보안카메라, 화재경보기 등)
	right_now int default 0, --즉시예약가능여부 / no : 0 / yes:1
--	total_rating int default 0,
--	review_count int default 0,
	keyword varchar(1000) not null --괌 검색했는지 서울 검색했는지 알기 위해서
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO airdnd_home VALUE(0, 타이틀부터 쭉쭉);



--리스트뷰 VIEW (searchPage)
--여기서 슈퍼호스트, 북마크 여부와 총 갯수 어떻게 할지 미정

CREATE VIEW arirdnd_searchPage AS
SELECT img, sub_title, main_title, max_peop || bed_cnt || bath_cnt || bedroom_cnt || facilities as feature ,
	 total_rating, review_count, latlng as location, price
FROM airdnd_home;


--후기 DB(댓글)
create table airdnd_review(
	idx int auto_increment primary key,
	user_idx int not null, --FK
	virtual_profile_img varchar(1000),
	virtual_name varchar(1000),
	host_idx int not null, --FK
	home_idx int not null, --FK
	comment varchar(5000) not null,
	r_clean int not null,--청결도
	r_cmct int not null,--의사소통
	r_checkin int not null, --체크인
	r_accuracy int not null, --정확성
	r_gasungbi int not null, --가격대비만족도
	review_date date not null, --후기 작성 날짜
	review_cont varchar(1000) not null, --리뷰 내용
	r_loc int not null --위치
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO airdnd_review VALUE(0, 1, 프로필부터 ^^ );




--유저별 예약 정보 DB
create table airdnd_user_res_info(
	idx int(9) auto_increment primary key,
	user_idx int(9) not null, --FK
	price int(9) not null,
	checkin varchar(50) not null,
	checkout varchar(50) not null, --checkout < sysdate 기준으로 이전 예약에 넣으면 될 듯
	home_idx int(9) not null, --FK
	reservation_number varchar(50) not null,
	guest_idx int(9) default 0, --여러 개일 수 있는데 한 명까지만 추가되게 하기로 함. (이름, 프로필 사진 불러옴)
	paid_date_time DATE,
	is_canceled int(1) default 0 --예약 취소 여부. 1이면 취소
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO airdnd_user_res_info VALUE(0, 1, 120800, '2020-08-17', '2020-08-19', 1, 'SDOGEKAJDS', 2, '2020-08-17', 0);




--저장목록(북마크) DB
create table airdnd_bookmark_list(
	idx int(9) auto_increment primary key,
	user_idx int(9) not null,
	bookmark_list_title varchar(1000) not null,
	home_idx int(9) default 0, --FK
	checkin varchar(50) not null,
	checkout varchar(50) not null,
	review_idx int(9) not null --FK. 평점, 후기 개수는 후기 DB에서 추출하여 사용
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO airdnd_bookmark_list VALUE(0, 1, '8월의 제주', 1, '2020-08-17', '2020-08-19', 1);



--채팅 DB
--추후 수정될 수 있음 ㅠㅠ
create table airdnd_chatting(
	idx int(9) auto_increment primary key,
	host_idx int(9) not null, --FK
	user_idx int(9) not null, --FK
	content CLOB not null,
	image_url varchar(1000),
	send_date_time DATE not null,
	msg_hidden_or_not int(1) default 0 --숨겼으면 1
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO airdnd_chatting VALUE(0, 1, 2, '안녕하세여 *^^*', '', sysdate, 0);
INSERT INTO airdnd_chatting VALUE(0, 1, 2, '배가 고픕니다.', '', sysdate, 0);

